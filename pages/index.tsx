import Head from 'next/head'
import { Feed } from '../components/Feed'
import { Sidebar } from '../components/Sidebar'
import Login from '../components/Login';
import Modal from '../components/Modal';
import { useRecoilValue } from 'recoil';
import { modalState } from '../atoms/midalAtom';
import Widgets from '../components/Widgets';
import { userinfoState } from 'atoms/userInfoAtom';
interface HomeProps {
  trendingResults: any,
  followResults: any,
}
export default function Home({ trendingResults,followResults}: HomeProps) {
  const isOpen = useRecoilValue(modalState);
  const userinfo = useRecoilValue(userinfoState)
  if (!userinfo) {
    return <Login />
  }
  return (
    <div className='dark text-black dark:text-white'>
      <Head>
        <title>cherry blog</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className='bg-white dark:bg-black min-h-screen flex max-w-[1500px] mx-auto'>
        <Sidebar></Sidebar>
        <Feed></Feed>
        <Widgets trendingResults={trendingResults} followResults={followResults}></Widgets>
        {isOpen && <Modal />}
      </main>
    </div>
  )
}

export async function getServerSideProps(context: any) {
  const res1 = [
    {
      "heading": "T20 World Cup 2021 Â· LIVE",
      "description": "NZvAUS: New Zealand and Australia clash in the T20 World Cup final",
      "img": "https://img1.baidu.com/it/u=592570905,1313515675&fm=253&app=138&size=w931&n=0&f=JPEG&fmt=auto?sec=1667235600&t=c35915a8d34897267688ebc08bcf8c4c",
      "tags": [
        "#T20WorldCupFinal, ",
        "Kane Williamson"
      ]
    },
    {
      "heading": "Trending in United Arab Emirates",
      "description": "#earthquake",
      "img": "https://img1.baidu.com/it/u=592570905,1313515675&fm=253&app=138&size=w931&n=0&f=JPEG&fmt=auto?sec=1667235600&t=c35915a8d34897267688ebc08bcf8c4c",
      "tags": [
        "#DubaiAirshow, ",
        "#gessdubai"
      ]
    },
    {
      "heading": "Trending in Digital Creators",
      "description": "tubbo and quackity",
      "img": "",
      "tags": [
        "QUACKITY AND TUBBO,"
      ]
    }
  ]
  const trendingResults = res1
  const res2 = [
    {
      "userImg": "https://img1.baidu.com/it/u=592570905,1313515675&fm=253&app=138&size=w931&n=0&f=JPEG&fmt=auto?sec=1667235600&t=c35915a8d34897267688ebc08bcf8c4c",
      "username": "SpaceX",
      "tag": "@SpaceX"
    },
    {
      "userImg": "https://img1.baidu.com/it/u=592570905,1313515675&fm=253&app=138&size=w931&n=0&f=JPEG&fmt=auto?sec=1667235600&t=c35915a8d34897267688ebc08bcf8c4c",
      "username": "Elon Musk",
      "tag": "@elonmusk"
    },
    {
      "userImg": "https://img1.baidu.com/it/u=592570905,1313515675&fm=253&app=138&size=w931&n=0&f=JPEG&fmt=auto?sec=1667235600&t=c35915a8d34897267688ebc08bcf8c4c",
      "username": "Tesla",
      "tag": "@Tesla"
    }
  ]
  const followResults = res2
  return {
    props: {
      trendingResults,
      followResults,
    },
  };
}
